import{a as L,b as d,c as T,d as A,e as P,f as G,g as j,h as D,j as C,k}from"./chunk-VUXFQT5Q.js";import"./chunk-KROSMMNF.js";import{A as N,B as x,E as c,G as s,I as o,J as i,K as p,M as F,N as y,O as l,P as w,Q as M,S as v,Y as R,_ as E,aa as h,ia as V,ja as O,l as I,x as r,z as g}from"./chunk-RQAKM4QO.js";var H=t=>({"is-invalid":t});function $(t,n){t&1&&(o(0,"div",16),l(1," Valid email is required. "),i())}function ee(t,n){if(t&1&&(o(0,"div",17),l(1),i()),t&2){let a=y();r(),w(a.errorMessage)}}function te(t,n){t&1&&p(0,"span",18)}var b=class t{constructor(n,a,e){this.fb=n;this.authService=a;this.router=e;this.authService.isLoggedIn()&&this.router.navigate(["/scholarships"]),this.form=this.fb.group({email:["",[d.required,d.email]],password:["",d.required]})}form;loading=!1;errorMessage=null;ngOnInit(){}login(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.errorMessage=null,this.authService.login(this.form.value).subscribe({next:()=>{this.router.navigate(["/scholarships"])},error:n=>{this.loading=!1,this.errorMessage=n.error?.message||"Login failed. Check your credentials.",console.error("Login Error:",n)}})}static \u0275fac=function(a){return new(a||t)(g(D),g(k),g(V))};static \u0275cmp=N({type:t,selectors:[["app-login"]],decls:22,vars:12,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"min-height","80vh"],[1,"card","p-4","shadow-lg",2,"max-width","380px","width","100%"],[1,"text-center","mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["class","alert alert-danger text-center",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3","small"],["routerLink","/auth/register"],[1,"invalid-feedback"],[1,"alert","alert-danger","text-center"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,e){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"User Login"),i(),o(4,"form",3),F("ngSubmit",function(){return e.login()}),o(5,"div",4)(6,"label",5),l(7,"Email"),i(),p(8,"input",6),c(9,$,2,0,"div",7),i(),o(10,"div",8)(11,"label",9),l(12,"Password"),i(),p(13,"input",10),i(),c(14,ee,2,1,"div",11),o(15,"button",12),c(16,te,1,0,"span",13),l(17),i()(),o(18,"p",14),l(19," Don't have an account? "),o(20,"a",15),l(21,"Register here"),i()()()()),a&2){let m,u,f;r(4),s("formGroup",e.form),r(4),s("ngClass",v(8,H,((m=e.form.get("email"))==null?null:m.invalid)&&((m=e.form.get("email"))==null?null:m.touched))),r(),s("ngIf",((u=e.form.get("email"))==null?null:u.invalid)&&((u=e.form.get("email"))==null?null:u.touched)),r(4),s("ngClass",v(10,H,((f=e.form.get("password"))==null?null:f.invalid)&&((f=e.form.get("password"))==null?null:f.touched))),r(),s("ngIf",e.errorMessage),r(),s("disabled",e.loading||e.form.invalid),r(),s("ngIf",e.loading),r(),M(" ",e.loading?"Logging in...":"Login"," ")}},dependencies:[h,R,E,C,P,L,T,A,G,j],encapsulation:2})};var q=t=>({"is-invalid":t});function ie(t,n){t&1&&(o(0,"div",21),l(1," Valid email is required. "),i())}function re(t,n){t&1&&(o(0,"div",21),l(1," Passwords must match. "),i())}function ne(t,n){if(t&1&&(o(0,"div",22),l(1),i()),t&2){let a=y();r(),w(a.errorMessage)}}function oe(t,n){if(t&1&&(o(0,"div",23),l(1),i()),t&2){let a=y();r(),w(a.message)}}function ae(t,n){t&1&&p(0,"span",24)}var _=class t{constructor(n,a,e){this.fb=n;this.authService=a;this.router=e;this.form=this.fb.group({fullName:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",d.required]},{validators:this.passwordMatchValidator})}form;loading=!1;errorMessage=null;message=null;ngOnInit(){}passwordMatchValidator(n){let a=n.get("password")?.value,e=n.get("confirmPassword")?.value;return a===e?null:{mismatch:!0}}register(){if(this.errorMessage=null,this.message=null,this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.authService.register(this.form.value).subscribe({next:()=>{this.loading=!1,this.message="Registration successful! You can now log in.",this.form.reset(),setTimeout(()=>this.router.navigate(["/auth/login"]),2e3)},error:n=>{this.loading=!1,this.errorMessage=n.error?.message||"Registration failed. The email may already be in use.",console.error("Registration Error:",n)}})}static \u0275fac=function(a){return new(a||t)(g(D),g(k),g(V))};static \u0275cmp=N({type:t,selectors:[["app-register"]],decls:32,vars:20,consts:[[1,"d-flex","justify-content-center","align-items-center",2,"min-height","80vh"],[1,"card","p-4","shadow-lg",2,"max-width","420px","width","100%"],[1,"text-center","mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","fullName",1,"form-label"],["type","text","id","fullName","formControlName","fullName",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"mb-4"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control",3,"ngClass"],["class","alert alert-danger text-center",4,"ngIf"],["class","alert alert-success text-center",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3","small"],["routerLink","/auth/login"],[1,"invalid-feedback"],[1,"alert","alert-danger","text-center"],[1,"alert","alert-success","text-center"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,e){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),l(3,"Create Account"),i(),o(4,"form",3),F("ngSubmit",function(){return e.register()}),o(5,"div",4)(6,"label",5),l(7,"Full Name"),i(),p(8,"input",6),i(),o(9,"div",4)(10,"label",7),l(11,"Email"),i(),p(12,"input",8),c(13,ie,2,0,"div",9),i(),o(14,"div",4)(15,"label",10),l(16,"Password"),i(),p(17,"input",11),i(),o(18,"div",12)(19,"label",13),l(20,"Confirm Password"),i(),p(21,"input",14),c(22,re,2,0,"div",9),i(),c(23,ne,2,1,"div",15)(24,oe,2,1,"div",16),o(25,"button",17),c(26,ae,1,0,"span",18),l(27),i(),o(28,"p",19),l(29," Already have an account? "),o(30,"a",20),l(31,"Login"),i()()()()()),a&2){let m,u,f,S,Y,z;r(4),s("formGroup",e.form),r(4),s("ngClass",v(12,q,((m=e.form.get("fullName"))==null?null:m.invalid)&&((m=e.form.get("fullName"))==null?null:m.touched))),r(4),s("ngClass",v(14,q,((u=e.form.get("email"))==null?null:u.invalid)&&((u=e.form.get("email"))==null?null:u.touched))),r(),s("ngIf",((f=e.form.get("email"))==null?null:f.invalid)&&((f=e.form.get("email"))==null?null:f.touched)),r(4),s("ngClass",v(16,q,((S=e.form.get("password"))==null?null:S.invalid)&&((S=e.form.get("password"))==null?null:S.touched))),r(4),s("ngClass",v(18,q,(e.form.errors==null?null:e.form.errors.mismatch)&&((Y=e.form.get("confirmPassword"))==null?null:Y.touched))),r(),s("ngIf",(e.form.errors==null?null:e.form.errors.mismatch)&&((z=e.form.get("confirmPassword"))==null?null:z.touched)),r(),s("ngIf",e.errorMessage),r(),s("ngIf",e.message),r(),s("disabled",e.loading||e.form.invalid),r(),s("ngIf",e.loading),r(),M(" ",e.loading?"Processing...":"Register"," ")}},dependencies:[h,R,E,C,P,L,T,A,G,j],encapsulation:2})};var le=[{path:"login",component:b},{path:"register",component:_},{path:"",redirectTo:"login",pathMatch:"full"}],B=class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=x({type:t});static \u0275inj=I({imports:[O.forChild(le),O]})};var J=class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=x({type:t});static \u0275inj=I({imports:[h,B,C,b,_]})};export{J as AuthModule};
